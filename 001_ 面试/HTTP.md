#### http 发展史 https://blog.csdn.net/liujianfei526/article/details/53289350

- http 0.9 1991 年 --> 只有 GET 请求，TCP 建立之后，客户端发送请求，服务端只能回应 HTML 格式的字符串，发送完毕，关闭 TCP 连接

- http 1.0 1996 年 --> 任何格式内容都能发送、新增 POST 和 HEAD 命令；格式上变为了数据+头信息，以及新增了状态码、字符集等

  - 单连接，用完就关闭 TCP 连接了

- http 1.1 1997 年 --> 持久连接、管道机制、分块传输、新增其他请求方式；

  - 缺点就是数据通信是有序的，服务器处理完一个响应，才进行下一个响应；（解决办法就是：减少请求、同时开多持久链接）

  - 持久连接：Connection: keep-alive
  - 管道机制：同一个 TCP 连接中，客户端可以同时发送多个请求，也就是 ABC 请求，可以同时发送，但是返回结果是按照 ABC 这样返回的；以前是 A 响应后发 B 请求，B 响应后发 C 请求

- http 2.0 2015 年 --> 新增二进制协议、多路复用、数据流不顺序发送、头信息压缩、服务器推送

  - 二进制协议：http1.1 的头信息是文本，数据体式其他内容； http2.0 就把头信息也统一为二进制了
  - 多路复用：复用 TCP 链接，一个链接里，客户端和服务端都可以同时发送请求或回应，而且不用按照顺序一一对应（例如服务器接收 A 和 B 请求，先响应 A 的一部分，然后响应 B，再继续发 A 剩下的部分）
  - 数据流：由于不按顺序发送，那么数据包必须做标记，指出属于哪个请求的
  - 头信息压缩：允许 gzip 或 compress 压缩后再发送；而且同时维护一张头信息表，所有字段存如表，生成一个索引号，以后就只发索引号了
  - 服务器推送：http2.0 允许服务器未经请求，主动向客户端发送资源

  - 帧代表最小的数据单位，每个帧会标识出该帧属于哪个流，流也就是多个帧组成的数据流

#### http1.0 与 http1.1 的区别

- 缓存处理：http1.0 是用 If-Modified-Since\Expries 作为判断标准，http1.1 引入了 Etag\If-Unmodified\If-Match\If-None-Match 等更多的缓存头来控制缓存
- 带宽优化和网络链接的使用：http1.0 不支持断点续传，http1.1 加了 range 头域，返回码是 206，支持断点续传
- 错误处理通知：http1.1 中新增了 24 了错误状态响应码
- Host 头处理：
- 长连接

#### http、https、websocket 三次握手的区别 https://www.cnblogs.com/lovesong/p/5186200.html

- 网络协议分层：

  - 应用层：HTTP、SMTP、FTP、SSH...
  - 表示层：
  - 会话层
  - 传输层： TCP、UDP...
  - 网络层: IP...
  - 数据链路层：以太网...
  - 物理层：线路、无线电、光纤...

- 对称加密：将信息和私钥通过某种算法混合在一起，这样除非指得私钥，不然无法获取内容，刚好客户端和服务端都指得这个私钥

- SSL：安全套接字层
- TLS：传输层安全协议

- SYN：TCP/IP 建立连接时使用的握手信号
- Seq number: 序列号
- Ack number: 确认号码

- http 三次握手

  - 第一次握手：客户端发送 syn(syn=j) 包给服务器，进去 SYN_SEND 状态，等待服务器确认
  - 第二次握手：服务器收到 syn 包，确认客户端的 SYN(ack=j+1), 同时自己也发送一个 syn(syn=k)包,即 SYN+ACK 包，此时服务器进入 SYN_RECV 状态
  - 第三次握手：客户端收到服务器的 SYN+ACK 包，向服务器发送 ACK(ack=k+1)包，发送完毕，就 Ehud 和服务端进入成功状态，完成三次握手

- https 三次握手（SSL 依靠证书来验证服务器身份， 并为通信加密）

  - 客户端发起 https 请求
  - 服务端把 CA 证书，包含过期时间、加密方法等信息，传递给客户端
  - 客户端的 TLS 收到信息后，验证公钥是否有效，有效则生成一个随机值，用证书对该随机值加密，再发送给服务端
  - 服务端收到信息后，用私钥解密，就能够得到客户端传过来的随机值，然后将内容用对称加密的方式进行加密，再把加密后的信息发送给服务端
  - 客户端用之前生成的私钥解密接收的信息，就获取到了内容

- websocket 三次握手

#### http 与 https 的区别

- https 协议需要用到 CA 证书或自制证书
- http 是明文传输，https 则是具有安全性的 SSL 加密传输
- http 是直接与 TCP 进行数据传输，端口是 80；https 是经过一层 SSL，端口是 443
- http 的连接很简单，无状态；https 是 ssl+http，更加安全

#### HTTPS 的加密算法和 HASH 算法

- 非对称加密算法

  - RSA
  - DSA/DSS

- 对称加密算法

  - AES
  - RC4
  - 3DES

- HASH 算法
  - MD5
  - SHA1
  - SHA245

#### 如何实现 token 加密

- 需要一个随机数作为加密的依据 secret
- 后端利用 secret 和加密算法对账号密码生成一个字符串 token, 返回给前端
- 前端每个 request 在 header 中带上 token
- 后端用同样的算法解密

#### HTTPS 中间人攻击是如何做的 --> 核心就是劫持真密钥，伪造假密钥给客户端和服务端

- 服务器向客户端发送公钥的时候，攻击者截获公钥，保留在自己手上，然后伪造一个公钥，发给客户端
- 客户端收到伪造的公钥后，生成加密 hash 发给服务器的时候被攻击者劫持
- 攻击者获得加密 hash 值，用自己的私钥解密获得真正的随机值密钥，同时生成假的加密 hash 值，发给服务器
- 服务器用私钥解密获取假密钥，用假密钥加密传输信息，攻击者就都能加密解密了

#### HTTP 状态码 --> https://baijiahao.baidu.com/s?id=1609940322276045505&wfr=spider&for=pc

- 1xx 临时响应，websocket 是 101
- 2xx 成功状态码
- 3xx 重定向状态码
- 4xx 客户端错误，客户端发出的请求错误导致服务器无法正常完成请求
- 5xx 服务端错误，服务端出错未能正确处理服务端请求

- 404 Not Found 服务器无法找到请求的页面或资源

  - 检测接口请求路径是否整确
  - 检测请求的资源路径是否整确

- 405 Method Not Allowed 方法不允许、方法禁用

  - 前端写错了接口的请求方式

- 500 Internal Server Error 服务器内部错误，不能完成客户端请求

  - 服务器错误，也可能是前端导致的，例如后台序列化错误，就是前端的 Content-Type 错误
  - 后端业务逻辑错误

-
