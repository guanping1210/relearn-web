#### scope 作用域 --> 作用域的最大用途是隔离变量或函数，并控制他们的生命周期
- 作用域是函数执行上下文创建时定义好的，不是函数执行时定义的
- js中有全局作用域、函数作用域, ES6又增加了块级作用域

#### scope chain 作用域链 --> 当一个块或函数嵌套在另一个块或函数中时，就发生了作用域的嵌套
- 在当前函数中如果js引擎无法找到某个变量，就会往上一级嵌套的作用域中去寻找，直到找到该变量或抵达全局作用域，这样的链式关系就称为作用域链
- 指的是定义时的嵌套，而不是执行时的嵌套


#### 执行上下文 --> 当函数执行的时候，就会创建一个叫执行上下文的环境，分为创建和执行2个阶段
- 创建阶段，指的是函数被调用但是还未执行任何代码时，此时创建了一个拥有三个属性的对象
```
executionContext = {
  scopeChain: { ... }, // 创建作用域链(scope chain)
  variableObject: { ... }, // 初始化变量、函数、形参
  this: { ... }, // 指定this
}
```

- 代码执行阶段，主要负责的工作：1、分配变量、函数的引用、赋值 2、执行代码

- 举例创建阶段和执行阶段
```
  function demo() {
    var a = 10
  }
  demo(100)

  // 创建阶段大致这样，在这个阶段出现了变量提升  -->  这时候是将要执行demo(100)了，但是还没真正的执行
  exectionContext = {
    scopeChain: {...},
    variableObject: {
      arguments: { // 创建形参对象
        0: 100,
        length: 1,
      },
      num: 100, // 创建形参名称，赋值/创建引用拷贝
      a: undefined, // 内部声明变量a，初始化为undefined
    },
    this: {...}
  }

  // 执行阶段：主要是赋值并执行代码
  exectionContext = {
    scopeChain: { ... },
    variableObject: {
      arguments: {
        0: 100,
        length: 1
      },
      num: 100,
      a: 10, // 分配变量、赋值
    }
  }
```
#### 执行上下文栈 --> 

#### 闭包 --> 指的是一个作用域有权利访问另一个作用域中的变量、函数，这种行为就叫闭包
- 封装似有变量(amd的框架等使用)
- 存储变量


#### this --> 方便找到当前函数是被谁调用执行的（一个函数在执行的时候，就有this,是上下文的一个属性）

#### 作用域链和执行栈，是不同的东西 --> 但是有说作用域链是基于上下文的，但是这是不对的；


#### 函数有分定义栈和执行栈，一般说向上查找，其实是找的定义栈，而不是执行栈

#### 箭头函数　this --> 指向箭头函数定时时外层所在的词法作用域
- 秘诀：
- - 没有通过 . 出来的this，都指向window
- - 通过 . 出来的this, 都指向点前面的那个对象
- - 通过new 出来的那个this，指向 new出来的对象
- - 特殊情况：call 、apply、bind，指向第一个参数

#### 逗号表达式 --> 永远返回后一项
```
var a = (0, 1)
console.log(a) // 1

var b = (0, 1, 2, 3, 4 , 5)
console.log(b) // 5
```